# AI点读笔 - 产品需求说明书（PRD）

> 版本：V1.0  
> 更新日期：2026-02-10  
> 状态：初稿

---

## 1. 需求背景/概述

### 1.1 项目背景
本产品是一款面向K12小学生的AI互动式电子课本点读学习Web应用。通过将纸质教材数字化，结合AI语音朗读、发音评测、背诵练习等功能，为小学生提供沉浸式的自主学习体验。

### 1.2 产品定位
- 目标用户：小学1-6年级学生及家长
- 使用场景：课后自主学习、预习复习、发音练习
- 技术方案：纯前端Web应用（HTML5 + CSS3 + JavaScript ES6+），无需安装，浏览器直接访问
- 数据存储：本地 localStorage 持久化

### 1.3 当前支持范围
- 学科：英语（沪教版）、语文（人教版）
- 年级：小学1-6年级
- 教材版本：含新版（2024秋/2025春/2025秋）和旧版

---

## 2. 产品目标

| 目标 | 描述 |
|------|------|
| 核心体验 | 模拟实体点读笔，点击课本内容即可听到标准发音 |
| 学科覆盖 | 支持英语和语文两大学科，覆盖小学全年级 |
| 互动学习 | 提供复读、连读、评测、背诵四大学习模式 |
| 学习追踪 | 记录学习进度，展示已学/未学内容，完成课程时给予激励 |
| 易用性 | 界面简洁友好，适合儿童操作，首次使用有引导教程 |

---

## 3. 需求详细描述

### 3.1 业务流程

#### 3.1.1 主导航流程
```
首页 → 选择学科（英语/语文） → 选择教材版本 → 选择课程章节 → 进入点读页面
```

#### 3.1.2 页面层级
| 层级 | 页面 | 说明 |
|------|------|------|
| L0 | 首页（HOME） | 学科入口 + 学习记录概览 |
| L1 | 教材选择（TEXTBOOK） | 展示该学科下所有教材版本 |
| L2 | 章节目录（CHAPTER） | 展示教材的单元/课程列表及学习进度 |
| L3 | 点读阅读（READING） | 核心功能页，展示课本页面图片+热点区域+AI工具栏 |
| 独立 | 设置（SETTINGS） | 音色选择，从任意页面进入，返回时回到原页面 |

#### 3.1.3 点读学习流程
```
进入点读页面 → 查看课本页面图片 → 点击热点区域 → 播放标准发音 → 可选：复读/连读/评测/背诵
```

---

### 3.2 需求描述

#### 3.2.1 首页模块

**功能细则：**
- 显示学科选择入口：英语（🔤）、语文（📖），以大按钮卡片形式展示
- 显示学习记录区域，按学科分组展示已学习的教材
- 每条学习记录显示：出版社、年级册别、当前学习章节、已完成课数/总课数、进度百分比条
- 点击学习记录卡片可直接跳转到该教材继续学习

**用户交互：**
- 点击学科按钮 → 显示加载提示 → 跳转到教材选择页
- 点击学习记录卡片 → 加载教材数据 → 跳转到该教材的第一课点读页面

**异常处理：**
- 学科数据加载失败 → Toast提示"加载失败，请重试"
- 教材暂无课程内容 → Toast提示"该教材暂无课程内容"

---

#### 3.2.2 教材选择模块

**功能细则：**
- 展示当前学科下所有可用教材版本
- 英语教材：沪教版，3-6年级上下册（含新版），共11本
- 语文教材：人教版，1-6年级上下册（含新版），共12本
- 每本教材显示封面图片、教材名称
- 英语封面图片来源：`facebook/` 目录
- 语文封面图片来源：`facebookCN/` 目录

**用户交互：**
- 点击教材卡片 → 加载章节数据 → 跳转到章节目录页
- 返回按钮 → 回到首页

**异常处理：**
- 教材列表加载失败 → 显示错误状态+重试按钮 + Toast"加载失败，请重试"
- 章节数据加载失败 → Toast"章节加载失败，请重试"

---

#### 3.2.3 章节目录模块

**功能细则：**
- 展示教材的完整目录结构（单元 → 课程）
- 每个课程显示学习进度状态（未学习/进行中/已完成）
- 顶部显示整体学习进度概览（百分比+进度条）
- 语文教材目录示例（二年级上册）：8个单元 + 附录（识字表、写字表、词语表）

**用户交互：**
- 点击课程 → 加载课程内容 → 跳转到点读页面
- 返回按钮 → 回到教材选择页

**异常处理：**
- 章节列表加载失败 → 显示错误状态+重试按钮 + Toast"加载失败，请重试"
- 课程加载失败 → Toast"课程加载失败，请重试"

---

#### 3.2.4 点读阅读模块（核心功能）

**功能细则：**

**(a) 页面展示**
- 全屏展示课本页面图片作为背景
- 英语课本图片来源：`insidebook/` 目录
- 语文课本图片来源：`insidebookCN/` 目录
- 在图片上叠加透明热点区域（clickableElements），用户点击即可触发朗读
- 语文课本仅保留文字热点，不包含拼音热点
- 热点数据包含：id、type、content（文本内容）、audioId、audioUrl（音频直链）、position（x/y/width/height百分比定位）

**(b) 音频播放**
- 点击热点区域后播放对应的标准发音音频
- 优先使用热点数据中的 `audioUrl` 直链播放
- 若无直链，通过 `dataManager.getAudioUrl()` 获取
- 播放时高亮对应热点区域，播放完成后取消高亮
- 支持音频播放失败重试机制（最多3次）

**(c) 翻页**
- 支持左右滑动手势翻页
- 顶部显示当前页码/总页数
- 翻页时自动加载新页面的热点数据

**(d) 侧边栏**
- 可展开/收起的课程目录侧边栏
- 支持快速跳转到其他课程

**(e) AI数字人工具栏**
- 页面右侧显示AI老师头像（数字人）
- 头像下方4个功能按钮：复读、连读、评测、背诵
- 数字人状态显示：待机、朗读中（声波动画）、录音中
- 4个功能按钮互斥，不能同时运行两个功能

**用户交互：**
- 点击热点 → 高亮区域 + 播放音频 + 数字人朗读动画
- 左滑 → 下一页；右滑 → 上一页
- 返回按钮 → 回到教材选择页

---

#### 3.2.5 复读功能

**功能细则：**
- 点击"复读"按钮，重新播放上一次点击的热点内容
- 必须先点击过某个热点内容才能使用

**异常处理：**
- 未点击过任何内容 → Toast"还没有点读过内容哦"

---

#### 3.2.6 连读功能

**功能细则：**
- 点击"连读"按钮开启/关闭连读模式（toggle）
- 开启后从当前页面第一个热点开始，按顺序自动播放所有热点
- 每个热点播放完成后自动播放下一个
- 全部播放完成后自动关闭连读模式

**用户交互：**
- 开启 → Toast"连读模式已开启 ▶️"，按钮高亮
- 关闭 → Toast"连读模式已关闭"，按钮恢复
- 全部播完 → Toast"本页连读完成 ✓"

**异常处理：**
- 当前页面无可点读内容 → Toast"当前页面没有可点读内容"

---

#### 3.2.7 评测功能

**功能细则：**
- 点击"评测"按钮，对当前选中的热点内容进行发音评测
- 流程：先播放一遍标准发音 → 弹出录音界面（3秒倒计时） → 显示评测结果弹窗
- 评测结果包含：
  - 总分（0-100）及等级（满分/优秀/良好/及格/不及格）
  - 逐词评分（英语）/ 逐字评分（语文）
  - 三维度评分条：流畅度、完整度、准确度
  - 评语文字
- 语文逐字评分：每个汉字单独一项，排除标点符号
- 英语逐词评分：按空格拆分为单词

**评测结果弹窗操作按钮：**
- 🔊 录音重听：回放用户录音（播放中可再次点击停止）
- 🎧 标准发音：播放标准音频（播放中可再次点击停止）
- 🔄 重新评测：关闭弹窗，重新进入评测流程
- 三个按钮互斥：点击一个会停止另一个正在播放的音频
- 关闭弹窗时自动停止所有音频播放

**异常处理：**
- 未选中内容 → Toast"请先点击一个内容再评测"
- 无法获取评测内容 → Toast"无法获取评测内容"
- 音频播放失败 → Toast"音频播放失败"
- 无录音数据 → Toast"暂无录音数据"
- 无标准音频 → Toast"暂无标准音频"

---

#### 3.2.8 背诵功能

**功能细则：**
- 点击"背诵"按钮，遮挡当前选中热点的文字内容
- 遮挡方式：在热点区域上覆盖遮罩，显示"📝 背诵中..."
- 遮挡后弹出录音界面（3秒倒计时）→ 显示评测结果弹窗
- 评测结果弹窗与评测功能相同（含录音重听/标准发音/重新背诵按钮）
- 录音结束后自动移除遮罩

**异常处理：**
- 未选中内容 → Toast"请先点击一个内容再背诵"
- 无法获取背诵内容 → Toast"无法获取背诵内容"

---

#### 3.2.9 设置模块

**功能细则：**
- 从任意页面点击设置图标进入
- 返回时回到进入设置前的页面（非固定返回首页）
- 音色选择：
  - 标准男声（排第一，可选，默认）
  - 甜美女声（置灰禁用，显示"即将上线"标签）
  - 可爱童声（置灰禁用，显示"即将上线"标签）
- 禁用的音色卡片：灰度显示、不可点击、试听按钮禁用
- 选中音色后保存到本地存储，应用到后续所有朗读

**用户交互：**
- 点击可用音色卡片 → 选中高亮 + Toast"正在切换到xxx..." → Toast"已切换到xxx 🎉"
- 点击禁用音色卡片 → 无响应
- 返回 → 回到进入设置前的页面

**异常处理：**
- 音色列表加载失败 → 显示错误状态+重试按钮 + Toast"加载失败，请重试"
- 音色切换失败 → Toast"音色切换失败，请重试"

---

#### 3.2.10 学习进度追踪

**功能细则：**
- 自动记录用户访问过的课程和页面
- 在章节目录页显示每课的学习状态
- 显示整体学习进度百分比
- 完成课程时触发祝贺动画（彩纸飘落+鼓励文字）
- 所有进度数据持久化到 localStorage

---

#### 3.2.11 首次使用引导教程

**功能细则：**
- 首次打开应用时自动弹出引导教程
- 分步骤展示应用核心功能
- 支持上一步/下一步/跳过操作
- 完成后标记为已引导，不再自动弹出
- 可在设置中手动重新触发

---

#### 3.2.12 音频播放失败重试机制

**功能细则：**
- 音频播放失败时自动重试，最多3次
- 每次重试显示Toast"正在重试... (n/3)"
- 3次均失败后弹出错误弹窗，提供：
  - 友好的错误描述
  - "重试"按钮
  - "取消"按钮
- 取消后Toast"已取消播放"

---

## 4. AI模型提示词方案

> （待补充）

---

## 5. 异常提示汇总

| 场景 | 提示内容 | 类型 |
|------|----------|------|
| 学科/教材/章节/课程加载失败 | 加载失败，请重试 | error |
| 教材暂无课程 | 该教材暂无课程内容 | info |
| 章节加载失败 | 章节加载失败，请重试 | error |
| 课程加载失败 | 课程加载失败，请重试 | error |
| 教材加载失败 | 教材加载失败，请重试 | error |
| 复读-未点击内容 | 还没有点读过内容哦 | info |
| 连读-无可点读内容 | 当前页面没有可点读内容 | info |
| 连读开启 | 连读模式已开启 ▶️ | info |
| 连读关闭 | 连读模式已关闭 | info |
| 连读完成 | 本页连读完成 ✓ | success |
| 评测-未选中内容 | 请先点击一个内容再评测 | info |
| 评测-无法获取内容 | 无法获取评测内容 | info |
| 评测-播放标准音 | 先听一遍标准发音... | info |
| 背诵-未选中内容 | 请先点击一个内容再背诵 | info |
| 背诵-无法获取内容 | 无法获取背诵内容 | info |
| 背诵-遮挡提示 | 📝 内容已遮挡，请背诵... | info |
| 录音重听-无数据 | 暂无录音数据 | info |
| 标准发音-无音频 | 暂无标准音频 | info |
| 音频播放失败 | 音频播放失败 | error |
| 重新评测-未选中 | 请先点击要评测的内容 | info |
| 音频重试中 | 正在重试... (n/3) | info |
| 取消播放 | 已取消播放 | info |
| 音色切换中 | 正在切换到xxx... | info |
| 音色切换成功 | 已切换到xxx 🎉 | success |
| 音色切换失败 | 音色切换失败，请重试 | error |
| 音色加载失败 | 加载失败，请重试 | error |
| 朗读中 | 正在朗读xxx... | info |
| 朗读完成 | 朗读完成 ✓ | success |
| 翻页 | 翻到下一页 / 翻到上一页 | info |
| 进度功能 | 进度功能即将上线 | info |
| 引导完成 | 欢迎开始学习！ / 引导完成！ | success |
| 加载学科教材 | 正在加载xxx教材... | info |
| 加载教材 | 正在加载xxx... | info |
| 加载课程 | 正在加载xxx... | info |
